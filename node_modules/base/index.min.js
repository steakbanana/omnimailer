"use strict";var util=require("util");var define=require("define-property");var CacheBase=require("cache-base");var Emitter=require("component-emitter");var isObject=require("isobject");var merge=require("mixin-deep");var pascal=require("pascalcase");var cu=require("class-utils");function namespace(a){var d=a?CacheBase.namespace(a):CacheBase;var c=[];function b(f,e){if(!(this instanceof b)){return new b(f,e)}d.call(this,f);this.is("base");this.initBase(f,e)}util.inherits(b,d);Emitter(b);b.prototype.initBase=function(f,e){this.options=merge({},this.options,e);this.cache=this.cache||{};this.define("registered",{});if(a){this[a]={}}this.define("_callbacks",this._callbacks);if(isObject(f)){this.visit("set",f)}b.run(this,"use",c)};b.prototype.is=function(e){if(typeof e!=="string"){throw new TypeError("expected name to be a string")}this.define("is"+pascal(e),true);this.define("_name",e);this.define("_appname",e);return this};b.prototype.isRegistered=function(e,f){if(this.registered.hasOwnProperty(e)){return true}if(f!==false){this.registered[e]=true;this.emit("plugin",e)}return false};b.prototype.use=function(e){e.call(this,this);return this};b.prototype.define=function(e,f){if(isObject(e)){return this.visit("define",e)}define(this,e,f);return this};b.prototype.mixin=function(e,f){b.prototype[e]=f;return this};b.prototype.mixins=b.prototype.mixins||[];Object.defineProperty(b.prototype,"base",{configurable:true,get:function(){return this.parent?this.parent.base:this}});define(b,"use",function(e){c.push(e);return b});define(b,"run",function(h,j,f){var e=f.length,g=0;while(e--){h[j](f[g++])}return b});define(b,"extend",cu.extend(b,function(e,f){e.prototype.mixins=e.prototype.mixins||[];define(e,"mixin",function(h){var g=h(e.prototype,e);if(typeof g==="function"){e.prototype.mixins.push(g)}return e});define(e,"mixins",function(g){b.run(g,"mixin",e.prototype.mixins);return e});e.prototype.mixin=function(g,h){e.prototype[g]=h;return this};return b}));define(b,"mixin",function(f){var e=f(b.prototype,b);if(typeof e==="function"){b.prototype.mixins.push(e)}return b});define(b,"mixins",function(e){b.run(e,"mixin",b.prototype.mixins);return b});define(b,"inherit",cu.inherit);define(b,"bubble",cu.bubble);return b}module.exports=namespace();module.exports.namespace=namespace;